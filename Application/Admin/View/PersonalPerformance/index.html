<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <!--[if lt IE 9]>
    <script type="text/javascript" src="__PUBLIC__/lib/html5shiv.js"></script>
    <script type="text/javascript" src="__PUBLIC__/lib/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/h-ui/css/H-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/h-ui.admin/css/H-ui.admin.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/lib/Hui-iconfont/1.0.8/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/h-ui.admin/skin/default/skin.css" id="skin" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/h-ui.admin/css/style.css" />
    <!--[if IE 6]>
    <script type="text/javascript" src="__PUBLIC__/lib/DD_belatedPNG_0.0.8a-min.js" ></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <title>团队业绩管理</title>
</head>
<body>
<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 业绩管理 <span class="c-gray en">&gt;</span> 个人业绩 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;</i></a></nav>
<div class="page-container">
    <form action="<{:U('Performance/personal')}>" method="post">
        <div class="text-c">
             <span class="select-box inline">
                <select name="" id="ins_type" class="select" style="width:120px;">
                    <option value="0">险种类型</option>
                    <option value="1">寿险</option>
                    <option value="2">车险</option>
                    <option value="3">非寿(不含车险)</option>
                </select>
            </span>&nbsp;
            <span class="select-box inline">
                <select name="" id="org_type" class="select" style="width:80px;">
                    <option value="0">编号类型</option>
                    <option value="1">分公司</option>
                    <option value="2">旗舰店</option>
                    <option value="3">标准店</option>
                    <option value="4">推荐人</option>
                </select>
            </span>&nbsp;
            <input type="text" name="" id="org_code" class="input-text" value = "请输入店铺编号" style="width:200px;" onfocus="if (this.value == '请输入店铺编号') {this.value=''}" onblur="if (this.value == '') {this.value = '请输入店铺编号'}">&nbsp;
            会员编号：<input type="text" name="" id="member" class="input-text" style="width:200px;" value="请输入会员编号" onfocus="if (this.value == '请输入会员编号') {this.value = ''}" onblur="if (this.value == '') {this.value = '请输入会员编号'}">&nbsp;
            <button name="" id="search" class="btn btn-success" type="button"><i class="Hui-iconfont">&#xe665;</i> 搜索</button>
        </div>
    </form>

    <div class="mt-20">
        <table class="table table-border table-bordered table-bg table-hover table-sort">
            <thead>
            <tr class="text-c">
                <th colspan="5">个人信息</th>
                <th colspan="4">本月业绩</th>
                <th colspan="4">本季度</th>
                <th colspan="4">本半年业绩</th>
                <th colspan="4">本年业绩</th>
            </tr>
            <tr class="text-c">
                <th width="40">会员名称</th>
                <th width="60">推荐人编码</th>
                <th width="60">标准店编码</th>
                <th width="60">旗舰店编码</th>
                <th width="60">分公司编码</th>                
                <th width="60">本月件数</th>
                <th width="60">本月承保</th>
                <th width="40">件均</th>
                <th width="20">排名</th>
                <th width="60">本季度件数</th>
                <th width="60">本季度承保</th>
                <th width="40">件均</th>
                <th width="20">排名</th>
                <th width="60">半年件数</th>
                <th width="60">半年承保</th>
                <th width="40">件均</th>
                <th width="20">排名</th>
                <th width="60">一年承保</th>
                <th width="60">一年件数</th>
                <th width="40">件均</th>
                <th width="20">排名</th>
              
            </tr>
            </thead>
            <tbody>
           
            </tbody>
        </table>
    </div>
</div>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="__PUBLIC__/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="__PUBLIC__/static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/static/h-ui.admin/js/H-ui.admin.js"></script>
<!--/_footer 作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="__PUBLIC__/lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript">


var table
$(function(){
    table = $(".table-sort").DataTable({
        "paging": true,
        "iDisplayLength": 10, //默认每页数量
        //"bPaginate": true, //翻页功能
        "bLengthChange": false, //改变每页显示数据数量
        "bFilter": true, //过滤功能
        "bSort": true, //排序功能
        "bInfo": true, //页脚信息
        "bAutoWidth": false, //自动宽度
        "bRetrieve": true,
       // "processing": true,
        "serverSide" : false,//服务器端进行分页处理的意思
        "bPaginate": true,
        "searching": false, //禁用原生搜索
       //"bProcessing": true
       "ajax" :{
            url : "<{:U('Admin/PersonalPerformance/get_result')}>",
            type: "GET",
            dataType : "json",
            data : function(){
                var ins_type = document.getElementById("ins_type").value;
                var org_type = document.getElementById("org_type").value;
                var org_code = document.getElementById("org_code").value;
                var member   = document.getElementById("member").value;
                var param;
                param = {"ins_type" : ins_type,"org_type" : org_type,"org_code" : org_code,"member" : member}; 
                return param;           
            },
            dataSrc :function(result){
                if (result == 1) {
                    return false;  
                }if (result == 2) {
                    layer.msg("请选择险种类型");
                }else if (result == 3) {
                    layer.msg("请选择其他搜索条件");
                }else if (result == 4) {
                    layer.msg("请输入店铺编号或会员编号");
                }else if (result == 5){
                    layer.msg("请选择机构类型");
                }else{
                    console.log(result);
                    var returnData = {};
                    returnData.data = result.data;
                 //   console.log(returnData);
                    return returnData.data;
                }
            }
       },
       columns:[
            {data : "name"},
            {data : "recommend_member_id"},
            {data : "shop_number"},
            {data : "flagship_number"},
            {data : "branch_shop_number"},
            {data : "mon_sum"},
            {data : "mon_achieve"},
            {data : "mon_average"},
            {data : "mon_ranking"},
            {data : "quar_sum"},
            {data : "quar_achieve"},
            {data : "quar_average"},
            {data : "quar_ranking"},
            {data : "half_sum"},
            {data : "half_achieve"},
            {data : "half_average"},
            {data : "half_ranking"},
            {data : "year_sum"},
            {data : "year_achieve"},
            {data : "year_average"},
            {data : "year_ranking"}
       ]
    });
});

$('#search').click(function() {
    table.ajax.reload();
    return false;
});
</script>
</body>
</html>